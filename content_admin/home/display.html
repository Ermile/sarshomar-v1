{%extends display.main%} {%block content%}

<div class="main">

{%if visitors%}
 <div class="row auto unselectable">
{%if error%}<div id="chart-error">{{error}}</div>{%else%}{%endif%}
  <div id="chart" data-step='5' data-intro='{%trans "Daily Visit Chart"%}'></div>
 </div>
{%endif%}


  <div class="admin-area-chart">
    <img src="{{url.static}}images/chart-sample.jpg" alt="">
  </div>
  <div class="box admin-area">
    <div class="admin-area-box-container">
      <div class="admin-area-items">
        <a href="/fa/admin/$" class="admin-area-item">
          <p class="title">مدیریت نظرسنجی‌ها</p>
          <p class="description">۸۷ سوال نیازمند بررسی</p>
        </a>
        <a href="/fa/admin/comments" class="admin-area-item">
          <p class="title">مدیریت دیدگاه‌ها</p>
          <p class="description">۳۷ دیدگاه نیازمند بررسی</p>
        </a>
        <a href="/fa/admin" class="admin-area-item">
          <p class="title">مدیریت...</p>
          <p class="description">مقداری توضیحات...</p>
        </a>
        <a href="/fa/admin" class="admin-area-item">
          <p class="title">مدیریت...</p>
          <p class="description">مقداری توضیحات...</p>
        </a>
        <a href="/fa/admin" class="admin-area-item horizontal-separator">
          <p class="title">مدیریت...</p>
          <p class="description">مقداری توضیحات...</p>
        </a>
        <a href="/fa/admin" class="admin-area-item">
          <p class="title">مدیریت...</p>
          <p class="description">مقداری توضیحات...</p>
        </a>
      </div>
    </div>
  </div>
</div>
{%endblock%}



{%block foot_js%}
{%if visitors%}
 <script type="text/javascript">
  route('*', function()
  {
    $(function () {
      $('#chart').highcharts({
        chart: { type: '{{chart_type}}' {%if global.lang=='fa_IR'%}, style: {fontFamily: 'IRANSans'}{%endif%} },
        title: { text: '' },
        xAxis: { categories: [{%for datarow in visitors%}'{%if global.lang=="fa_IR"%}{{datarow.date|jdate("y/m/j")}} {%else%} {{datarow.date |date("j F")}}{%endif%}', {%endfor%}] ,crosshair: true},
        yAxis: { title: {text: ''}, floor: 0, allowDecimals: false,},

        tooltip: {
          shared:true,
          useHTML: true,

          headerFormat: '<table><thead><tr><td colspan="3">{%if global.lang=="fa"%}{point.key} {%else%} {point.key}{%endif%}</td></tr></thead>',
          pointFormat: '<tr><td style="color: {series.color}">{series.name}: </td>' + '<td><b>{point.y:0.0f} {%trans "Visit"%}</b></td></tr>',
          footerFormat: '</table>',


        },
        legend: {
          layout: 'vertical',
          align: 'right',
          verticalAlign: 'middle',
          borderWidth: 0
        },
        plotOptions: {
          series: {stacking: 'normal',
        }

        },
        series:
        [
        {
         showInLegend: false,
          name: '{%trans "Page Views"%}',
          data: [ {%for datarow in visitors%}{{datarow.humans}},{%endfor%} ],
        },
        {
         showInLegend: false,
          name: '{% trans "Bots"%}',
          data: [ {%for datarow in visitors%}{{datarow.bots}},{%endfor%} ],
        },
        ]
      });
    });

  });
 </script>
{%endif%}
{%endblock%}
