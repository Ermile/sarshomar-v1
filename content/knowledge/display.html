{%extends display.main%}

{%block content%}
  <aside>
   <div class="group">
    <div class="options-box">
      <span class="ac-custom ac-checkmark">
       <input id="questions1" type="checkbox" name='pollcat' value="sarshomar" {%if checkbox.pollcat == 'sarshomar'%}checked{%endif%}>
       <label for="questions1">{%trans "Sarshomar"%}</label>
       {%if checkbox.pollcat == 'sarshomar'%}{{block('check_svg')}}{%endif%}
      </span>
      <span class="ac-custom ac-checkmark">
       <input id="questions2" type="checkbox" name='pollcat' value="civility" {%if checkbox.pollcat == 'civility'%}checked{%endif%}>
       <label for="questions2">{%trans "Civility"%}</label>
       {%if checkbox.pollcat == 'civility'%}{{block('check_svg')}}{%endif%}
     </span>
    </div>
   </div>
   <div class="group">
     <div class="full-line-title" data-title='{%trans "question type"%}'></div>
     <div class="options-box">
      <span class="ac-custom ac-checkmark reverse">
        <input id="type1" type="checkbox" name='pollgender' value="poll">
        <label for="type1">{%trans "Poll"%}</label>
      </span>
      <span class="ac-custom ac-checkmark reverse">
       <input id="type2" type="checkbox" name='pollgender' value="quiz">
       <label for="type2">{%trans "quiz"%}</label>
      </span>
      <span class="ac-custom ac-checkmark reverse">
       <input id="type4" type="checkbox" name='pollgender' value="survey">
       <label for="type4">{%trans "survey"%}</label>
      </span>
    </div>
   </div>
   <div class="group">
    <div class="full-line-title" data-title='{%trans "according to survey"%}'></div>
    <div class="options-box">
     <span class="ac-custom ac-checkmark">
      <input id="accord1" type="checkbox" name="polltype" value="multiplechoice">
      <label for="accord1">{%trans "multiplechoice"%}</label>
     </span>
     <span class="ac-custom ac-checkmark">
      <input id="accord2" type="checkbox" name="polltype" value="descriptive">
      <label for="accord2">{%trans "descriptive"%}</label>
     </span>
     <span class="ac-custom ac-checkmark">
      <input id="accord3" type="checkbox" name="polltype" value="notification">
      <label for="accord3">{%trans "notification"%}</label>
     </span>
     <span class="ac-custom ac-checkmark">
      <input id="accord4" type="checkbox" name="polltype" value="upload">
      <label for="accord4">{%trans "upload"%}</label>
     </span>
     <span class="ac-custom ac-checkmark">
      <input id="accord5" type="checkbox" name="polltype" value="starred">
      <label for="accord5">{%trans "starred"%}</label>
     </span>
     <span class="ac-custom ac-checkmark">
      <input id="accord6" type="checkbox" name="polltype" value="numerical">
      <label for="accord6">{%trans "numerical"%}</label>
     </span>
     <span class="ac-custom ac-checkmark">
      <input id="accord7" type="checkbox" name="polltype" value="sort">
      <label for="accord7">{%trans "sort"%}</label>
     </span>
    </div>
   </div>
   <div class="group">
    <div class="full-line-title" data-title='{%trans "survey time"%}'></div>
    <div class="options-box">
      <span class="ac-custom ac-checkmark reverse">
        <input id="time1" type="checkbox" name='status' value="publish">
        <label for="time1">{%trans "publish"%}</label>
      </span>
      <span class="ac-custom ac-checkmark reverse">
        <input id="time2" type="checkbox" name='status' value="expired">
        <label for="time2">{%trans "expire"%}</label>
      </span>
    </div>
   </div>
   <!-- <div class="group">
    <div class="full-line-title" data-title='{%trans "prize"%}'></div>
    <div class="options-box prize-box">
      <span class="ac-custom ac-checkmark" >
       <input id="prize1" type="checkbox" name='prize'>
       <label for="prize1">{%trans "پاسخ‌دهی"%}</label>
      </span>
      <span class="ac-custom ac-checkmark">
       <input id="prize2" type="checkbox" name='prize'>
       <label for="prize2">{%trans "قرعه‌کشی"%}</label>
      </span>
    </div>
   </div> -->
   <div class="group">
    <div class="full-line-title" data-title='{%trans "filters"%}'></div>
    <div class="options-box filters-box">
     <div class="select-box">
      <label for="marrital">{%trans "marrital"%}</label>
       <select name="marrital" id="marrital">
        <option value="single">{%trans "single"%}</option>
        <option value="marriade">{%trans "marriade"%}</option>
      </select>
     </div>
     <div class="select-box">
       <label for="employmentstatus">{%trans "employmentstatus"%}</label>
       <select name="employmentstatus" id="employmentstatus">
        <option value="employee">{%trans "employee"%}</option>
        <option value="unemployee">{%trans "unemployee"%}</option>
        <option value="retired">{%trans "retired"%}</option>
       </select>
     </div>
     <div class="select-box">
      <label for="gender">{%trans "gender"%}</label>
      <select name="gender" id="gender">
        <option value="male">{%trans "male"%}</option>
        <option value="female">{%trans "female"%}</option>
      </select>
     </div>
     <div class="select-box">
      <label for="graduation">{%trans "graduation"%}</label>
      <select name="graduation" id="graduation">
        <option value="illiterate">{%trans "illiterate"%}</option>
        <option value="undergraduate">{%trans "undergraduate"%}</option>
        <option value="graduate">{%trans "graduate"%}</option>
        <option value="under diploma">{%trans "under diploma"%}</option>
        <option value="diploma">{%trans "diploma"%}</option>
        <option value="2 year college">{%trans "2 year college"%}</option>
        <option value="bachelor">{%trans "bachelor"%}</option>
        <option value="master">{%trans "master"%}</option>
        <option value="phd">{%trans "phd"%}</option>
        <option value="other">{%trans "other"%}</option>
      </select>
     </div>
     <div class="select-box">
      <label for="country">{%trans "country"%}</label>
      <input name="country" id="country" value="">
     </div>
     <div class="select-box">
      <label for="age">{%trans "age"%}</label>
      <input name="age" id="age" value="">
     </div>
     <div class="select-box">
      <label for="province">{%trans "province"%}</label>
      <input name="province" id="province" value="">
     </div>
     <div class="select-box">
      <label for="religion">{%trans "religion"%}</label>
      <input name="religion" id="religion" value="">
     </div>
     <div class="select-box">
      <label for="language">{%trans "language"%}</label>
      <input name="language" id="language" value="">
     </div>

    </div>
   </div>
  </aside>

<div class="main">

  <div class="row">
    <div class="span1"></div>
    <div class="span10">
     <div class="search-box">
      <input type="text" name="search" placeholder='{%trans "Search"%}' class="pollsearch" value="{{search_value}}" autocomplete='off'>
      <button class="search-button"><i class="fa fa-search" aria-hidden="true"></i></button>
     </div>
     <div class="search-result" data-xhr='search-result' id="search-result">
       {%include display.result%}
     </div>
    </div><!-- /.span9 -->
  </div>
</div>
{%endblock%}


{%block foot_js%}
<script type="text/javascript" src="/static/js/svgcheckbox.js"></script>
<script>
$(document).ready(function()
{
 $("aside .full-line-title").click(function()
 {
  $(this).next(".options-box").slideToggle();
 });

 $("aside input[type=checkbox]").click(function()
 {
  $(this).parent('.ac-custom').toggleClass('selected');
 });

 $(document).on('click', '.star', function(){
   id = $(this).parent('li').attr("data-id");
   _self = $(this);
   $(this).ajaxify(
      {
        ajax:
        {
          data:
          {
            'type': 'faivorites',
            'id': id
          },
          abort: true,
          success: function(e, data, x)
          {
            $(_self).toggleClass("starred");
          },
          method: 'post'
        }
      });
 });

$(document).on('change', 'input[type=checkbox]', function(){
  url = window.location.pathname;
    console.log(url);
    name = $(this).attr('name');
    value = $(this).attr('value');
    console.log(name,value);

    var patt = new RegExp('/' + name + '\=' + value);
    test = patt.test(url);
    console.log(test);
    if(test)
    {
      if($(this).prop("checked"))
      {
        // is checked

      }
      else
      {
        // is not checked
        url = url.replace(patt, '');
      }
    }
    else
    {
      url = url +'/' + name + '=' + value;
    }
  Navigate({ url: url });

});

});


</script>
{%endblock%}


{%block search_result%}
  {%if poll_list%}
      <div class="polls-head">
        <span class="fa fa-star star" aria-hidden="true"></span>
        <span class="type">{%trans "Type"%}</span>
        <span class="title">{%trans "Title"%}</span>
        <span class="comments-count">{%trans "Comments"%}</span>
        <span class="votes-count">{%trans "Votes"%}</span>
        <span class="date">{%trans "Date"%}</span>
      </div>
      <ul class="polls-body">
  {%for key, value in poll_list%}
        <li class="polls-row{%if value.status == 'draft'%}{{' star'}}{%endif%}" data-id="{{value.id}}">
          <span class="fa fa-star star {%if value.faivorites%}starred{%endif%}" aria-hidden="true"></span>
          <span class="type" aria-hidden="true"><i class="fa fa-{{value.type}}"></i> </span>
          <span class="title"><a href="{{base.url}}/{{value.url}}">{{value.title|raw}}</a></span>
          <span class="comments-count">{{value.total}}</span>
          <span class="votes-count">{{value.total}}</span>
          <span class="date">{{value.date_modified|date('Y-m-d')}}</span>
        </li>
  {%endfor%}
      </ul>
      <!-- pagenation -->
      <div class="pagination-container">
      {%include display.pagination%}
      </div>
      <!-- ./pagenation -->
  {%else%}
      <div class="msg error">{%trans "No Result Found"%}</div>
  {%endif%}

{%endblock%}

{%block check_svg%}
<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M16.667,62.167c3.109,5.55,7.217,10.591,10.926,15.75 c2.614,3.636,5.149,7.519,8.161,10.853c-0.046-0.051,1.959,2.414,2.692,2.343c0.895-0.088,6.958-8.511,6.014-7.3 c5.997-7.695,11.68-15.463,16.931-23.696c6.393-10.025,12.235-20.373,18.104-30.707C82.004,24.988,84.802,20.601,87,16" style="stroke-dasharray: 126.37, 126.37; stroke-dashoffset: 0; transition: stroke-dashoffset 0.2s ease-in-out 0s;"></path></svg>
{%endblock%}

