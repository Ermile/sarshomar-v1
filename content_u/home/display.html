{%extends display.main%}

{%block content%}
   <aside class='dashboard-aside'>
    <img src="{{url.static}}images/svg/general/profile.svg" alt="" class="flip-rtl">
    <div class="personal-info">
     <span class="name">{{login.displayname}}</span>
     <span class="mobile">
     {% if login.mobile matches '/^\\d+$/' %}
      {{login.mobile}}
     {%else%}
      {%trans "Undefined"%}
     {% endif %}
     </span>
    </div>
{%if false%}
    <div class="progress" data-percent="{{complete_profile}}">
     <div class="bar"></div>
     <div class="detail">
     {%if complete_profile < 10 %}
      {%trans "Your profile is not complete!"%}
     {%elseif complete_profile < 50%}
      {%trans "Please complete your profile"%}
     {%else%}
      {%trans "Thank you for completing profile"%}
     {%endif%}
      <br><a href="@/profile" class="try">{%trans "Complete Profile"%}</a></div>
    </div>
{%endif%}
    <form method="post" class="ui-language">
     {% set lang_list = langList({'all' : true}) %}
     <select name="ui-language">
      <option value="">{%trans "Default language"%}</option>
      {%for key, value in lang_list%}
      <option value="{{key}}" {%if ui_language == key %}selected="selected"{%endif%}>{{value}}</option>
      {%endfor%}
     </select>
     <input type="submit" value='{%trans "Set default language"%}' class="try">
    </form>
    <a href="https://api.instagram.com/oauth/authorize/?client_id=4ecf7f9c5c4e4e94b4edc80efb10c491&redirect_uri=https://dev.sarshomar.com/referer/instagram&response_type=code&scope=comments+public_content" class="instagram-dashboard" data-hint='{%trans "Sync with Instagram"%}' data-direct target="_blank">
      <img src="https://dev.sarshomar.com/static/images/third-party/instagram.svg">
    </a>
   </aside>

   <div class="main box pad dashboard">

    <div class="row auto first-line">
     <div class='span2 card number'><h3>{%trans "Referred count"%}</h3><span>{{dashboard.user_referred}}</span></div>
     <div class='span2 card number'><h3>{%trans "Referred valid count"%}</h3><span>{{dashboard.user_verified}}</span></div>
     <div class='span2 card number'><h3>{%trans "Comments count"%}</h3><span>{{dashboard.comment_count}}</span></div>
     <div class='span2 card number'><h3>{%trans "Draft count"%}</h3><span>{{dashboard.draft_count}}</span></div>
     <div class='span2 card number'><h3>{%trans "Total Poll published"%}</h3><span>{{dashboard.publish_count}}</span></div>
     <div class='span2 card number'><h3>{%trans "Total Like taken"%}</h3><span>{{dashboard.poll_answered|number_format}}</span></div>
    </div>

    <div class="row auto">
     <div class="span6 card">
      <h3>{%trans "Summary of your activity in Sarshomar"%}</h3>
      <span>
       <div class="chart" id='chart-answered' data-format='dashboardPie' data-vals='[{"key":"Remain","value":100},{"key":"Answered","value":40},{"key":"Skipped","value":10}]'></div>
      </span>
     </div>
     <div class="span6">
      <div class="row auto">
       <div class='span6 card list fix'>
        <h3>{%trans "Quick Access"%}</h3>
        <span>
         <a href='/@/add'>{%trans "Create new poll"%}</a>
         <a href='/@/$'>{%trans "My polls"%}</a>
         <a href='/ask'>{%trans "Ask me"%}</a>
        </span>
       </div>
       <div class='span6 card number bold fix'><h3>{%trans "Your credit"%}</h3><span>{{(user_cash + user_cash_gift)|number_format}}<i>{%trans user_unit%}</i></span></div>
      </div>
      <div class="row auto">
       <div class='card activity'>
        <h3>{%trans "Last activity"%}</h3>
        <span>

        </span>
       </div>
      </div>
     </div>
    </div>
   </div>

{%endblock%}


{%block foot_js2%}
 <script type="text/javascript">
  $(function ()
  {
    // Highcharts.chart('#chart-answered',
    $('#chart-answered').highcharts(
    {
      chart:{type:'pie',},
      title:{text:''},
      plotOptions:{pie:{innerSize:100,depth:45,allowPointSelect:true,cursor:'pointer',showInLegend:true,}},
      credits:{enabled:false},
      tooltip:{enabled:false},
      series:[{name:'{%trans "Question Answered"%}',
        data:[['{%trans "Remained"%}', {{dashboard.sarshomar_poll}}],['{%trans "Skip"%}', {{dashboard.poll_skipped}}],{name:'{%trans "Answered"%}',y:{{dashboard.poll_answered}},sliced:true,selected:true}]
      }]
    });
  });
 </script>
{% endblock %}
