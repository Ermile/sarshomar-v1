{%extends display.main%}

{%block head_css%}
<style type="text/css">
#add .add { box-shadow: 0 0 1px #888888; margin-top: 1em; background-color: #FFFFFF; border-radius: 2px; font-size: 2em; transition: all .3s ease }
#add .add:hover { box-shadow: 0 0 3px #888888 }
#add .add a { font-size: 1em; color: #666666; display: block; padding: 1em .5em }
</style>
{%endblock%}

{%block content%}


{%if form_add or survey_mod %}

  <!-- list of polls in this survey -->
  {%if poll_list %}
    <h5>poll list</h5>
    {%for key, value in poll_list%}
      <li><a href="{{base.url}}/{{value.url}}?preview=yes">{{value.title}}</a></li>
    {%endfor%}
  {%endif%}

  <div class="row auto">
      <div class="span4"></div>
      <div class="span4">
          <form  method="post" class="form inline">
              <div class="field">
                  <label>poll type</label>
                  <select name="poll_type">
                      <option>select</option>
                      <option>notify</option>
                      <option>text</option>
                      <option>upload</option>
                      <option>star</option>
                      <option>number</option>
                      <option>media_image</option>
                      <option>media_video</option>
                      <option>media_audio</option>
                      <option>order</option>
                  </select>
              </div>
              <!-- here -->
              <div class="field">
                  <label>title</label>
                  <input type="text" name="title">
              </div>
              <div class="field">
                  <label>content</label>
                  <input type="text" name="content">
              </div>
              <div class="field">
                  <label>answer type</label>
                  <select name="answer_type[]">
                      <option>select</option>
                      <option>media_image</option>
                      <option>media_video</option>
                      <option>media_audio</option>
                  </select>
              </div>
              <div class="field">
                  <label>true answer</label>
                  <input type="checkbox" name="answer_true[]">
              </div>
              <div class="field">
                  <label>point</label>
                  <input type="text" name="answer_point[]">
              </div>
              <div class="field">
                  <label>answer1</label>
                  <input type="text" name="answers[]">
              </div>
              <div class="field">
                  <label>answer type</label>
                  <select name="answer_type[]">
                       <option>select</option>
                      <option>media_image</option>
                      <option>media_video</option>
                      <option>media_audio</option>
                  </select>
              </div>

              <div class="field">
                  <label>true answer</label>
                  <input type="checkbox" name="answer_true[]">
              </div>
              <div class="field">
                  <label>point</label>
                  <input type="text" name="answer_point[]">
              </div>
              <div class="field">
                  <label>answer2</label>
                  <input type="text" name="answers[]">
              </div>

              <div class="field">
                  <label>language</label>
                  <input type="text" name="language" value="{{site.currentlang}}" >
              </div>
              <div class="field">
                  <label>publish_date</label>
                  <input type="text" name="publish_date" value="{{"now"|date("Y-m-d")}}" >
              </div>
              <div class="field">
                  <label>sum meta</label>
                  can update<input type="checkbox" name="meta_canupdate"  >
                  <br>
                  can remove<input type="checkbox" name="meta_remove"  >
                  <br>
                  can stop<input type="checkbox" name="meta_stop"  >
                  <br>

              <div class="field">
                  <label>summary</label>
                  <input type="text" name="summary">
              </div>
              </div>
              <div class="field">
                  <label></label>
                  <input type="submit" name="filter" value="اعمال فیلتر">
              </div>
               <div class="field">
                  <label></label>
                  {%if survey_mod%}
                      <input type="submit" name="add_poll" value="افزودن سوالی دیگر">
                  {%else%}
                      <input type="submit" name="survey" value="تبدیل به پرسشنامه">
                  {%endif%}
              </div>
          </form>
      </div>
  </div>
{%endif%}







{%if form_edit%}

<form action="@/edit" method="post">
    title:<input type="text" name="title" value="{{form_data['poll'][0]['title']}}"><br>
    language:<input type="text" name="language" value="{{form_data['poll'][0]['language']}}"><br>
    content:<input type="text" name="content" value="{{form_data['poll'][0]['content']}}"><br>
    publish_date:<input type="text" name="publish_date" value="{{form_data['poll'][0]['publishdate']}}"><br>
    {%if form_data['answers'] is iterable %}
        {%for key, data in form_data['answers']%}
            answer{{key}}:<input type="text" name="answers[{{data['id']}}]" id="{{data['id']}}" value="{{data['option_value']}}"><br>
        {%endfor%}
    {%endif%}
    <input type="submit" value="اصلاح"><br>
</form>
{%endif%}




{% if filter_form %}
<form  method="post"  class="form inline">
    {%for key, value in filter_list %}
        <h1>{{key}}</h1>
            <div class="field">
                {%for i, group in value %}
                    <label>{{i}}</label>
                    {%for k, v in group %}
                            {% if k == 0%}
                            <select name="{{i}}">
                                <option value="">لطفا یکی را انتخاب کنید</option>
                            {%endif%}
                                <option value="{{v}}">{{v}}</option>
                    {%endfor%}
                            </select>
                {%endfor%}
                </div>
    {%endfor%}
<div class="field">
    <label></label>
    <input type="submit" value="انتشار">
</div>

</form>
{%endif%}






{% if publish_form %}
    <form method="post" class="form inline" >
        <div class="field">
            <label>cat</label>
            <select name="cat">
                    <option value="">لطفا یکی را انتخاب کنید</option>
                {%for key, value in cat%}
                    <option value="{{value.id}}">{{value.title|raw}}</option>
                {%endfor%}
            </select>
        </div>

        <div class="field">
            <label>article</label>
            <select name="article">
                    <option value="">لطفا یکی را انتخاب کنید</option>
                {%for key, value in article%}
                    <option value="{{value.id}}">{{value.title|raw}}</option>
                {%endfor%}
            </select>
        </div>

        <div class="field">
            <label>date_start</label>
            <input type="text" name="date_start">
        </div>

        <div class="field">
            <label>date_end</label>
            <input type="text" name="date_end">
        </div>
        <div class="field">
            <label>short_url</label>
            <input type="text" value="{{short_url}}">
        </div>
        {{ block('sp_tag') }}
        <input type="submit" >
    </form>
{%endif%}
{%endblock%}








{% block foot_js %}
<script type="text/javascript" src="/static/js/svgcheckbox.js"></script>
{%endblock%}






{%block sp_tag%}
  <div class="panel panel-default unselectable" data-step='7' data-intro='{%trans "Write your tag and press enter to add new keyword to content"%}' data-position='top'>
   <div class="panel-heading">{%trans "Tags"%}</div>
   <div class="panel-body">
    <div class="row">
     <textarea name="tags" id="sp-tags" class="sp-tags input" placeholder='{%trans "Enter Tags here"%}'>{{tagList}}</textarea>
     <input type="text" id="tag-add" autocomplete="off" placeholder='{%trans "Enter Tags"%}'/>
     <input type="button" id="tag-add-btn" class='button' value='{%trans "Add"%}' tabindex="-1" />
    </div>
    <div id="tag-list" class="row"></div>
   </div>
  </div>
{%endblock%}
