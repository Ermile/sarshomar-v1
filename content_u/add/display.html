{%extends display.mvc%}

{%block head_css%}
<style type="text/css">
#add .add { box-shadow: 0 0 1px #888888; margin-top: 1em; background-color: #FFFFFF; border-radius: 2px; font-size: 2em; transition: all .3s ease }
#add .add:hover { box-shadow: 0 0 3px #888888 }
#add .add a { font-size: 1em; color: #666666; display: block; padding: 1em .5em }
</style>
{%endblock%}

{%block content%}
{%for key , value in datatable%}
    <div class="container">
        <div class="row auto">
            <div class="span2"></div>
            <div class="span8">
                <div class="add">
                    <a href="{{value.id}}">{{value.title}}</a>
                </div>
            </div>
        </div>
    </div>
{%endfor%}

{%if form_add%}
<div class="row auto">
    <div class="span4"></div>
    <div class="span4">
        <form action="add" method="post" class="form inline">
            <div class="field">
                <label>poll type</label>
                <select name="poll_type">
                    <option>select</option>
                    <option>notify</option>
                    <option>text</option>
                    <option>upload</option>
                    <option>star</option>
                    <option>number</option>
                    <option>media_image</option>
                    <option>media_video</option>
                    <option>media_audio</option>
                    <option>order</option>
                </select>
            </div>
            <div class="field">
                <label>title</label>
                <input type="text" name="title">
            </div>
            <div class="field">
                <label>content</label>
                <input type="text" name="content">
            </div>
            <div class="field">
                <label>answer type</label>
                <select name="answer_type[]">
                    <option>select</option>
                    <option>media_image</option>
                    <option>media_video</option>
                    <option>media_audio</option>
                </select>
            </div>
            <div class="field">
                <label>answer1</label>
                <input type="text" name="answers[]">
            </div>
            <div class="field">
                <label>answer type</label>
                <select name="answer_type[]">
                     <option>select</option>
                    <option>media_image</option>
                    <option>media_video</option>
                    <option>media_audio</option>
                </select>
            </div>
            <div class="field">
                <label>answer2</label>
                <input type="text" name="answers[]">
            </div>

            <div class="field">
                <label>language</label>
                <input type="text" name="language" value="{{site.currentlang}}" >
            </div>
            <div class="field">
                <label>publish_date</label>
                <input type="text" name="publish_date" value="{{"now"|date("Y-m-d")}}" >
            </div>
            <div class="field">
                <label></label>
                <input type="submit" value="ثبت سوال">
            </div>
            {{ block('sp_tag') }}
        </form>
    </div>
</div>

{%endif%}

{%if form_edit%}
<form action="edit={{post_id}}" method="post">
	title:<input type="text" name="title" value="{{form_data['poll']['title']}}"><br>
	language:<input type="text" name="language" value="{{form_data['poll']['language']}}"><br>
	content:<input type="text" name="content" value="{{form_data['poll']['content']}}"><br>
	publish_date:<input type="text" name="publish_date" value="{{form_data['poll']['publishdate']}}"><br>
	{%if form_data['answers'] is iterable %}
		{%for key, data in form_data['answers']%}
			answer{{key}}:<input type="text" name="answers[{{data['id']}}]" id="{{data['id']}}" value="{{data['value']}}"><br>
		{%endfor%}
	{%endif%}
	<input type="submit" value="اصلاح"><br>
</form>
{%endif%}

{% if filter_form %}
<form action="filter={{poll_id}}" method="post">
    {%for key, value in add_filters %}
        {{value}}:<input type="text" name="{{value}}"><br>
    {%endfor%}

    {%for key, value in user_detail_filter %}
       {{key}}: <select name="{{key}}">
            {%for k, v in value%}
                <option value="{{v}}">{{v}}</option>
            {%endfor%}
                <option value="">سایر</option>
        </select>
        <br>
    {%endfor%}

<input type="submit" value="ثبت فیلتر های سوال">
</form>
{%endif%}
{%endblock%}





{%block sp_tag%}
  <div class="panel panel-default unselectable" data-step='7' data-intro='{%trans "Write your tag and press enter to add new keyword to content"%}' data-position='top'>
   <div class="panel-heading">{%trans "Tags"%}</div>
   <div class="panel-body">
    <div class="row">
     <textarea name="tags" id="sp-tags" class="sp-tags input" placeholder='{%trans "Enter Tags here"%}'>{{tagList}}</textarea>
     <input type="text" id="tag-add" autocomplete="off" placeholder='{%trans "Enter Tags"%}'/>
     <input type="button" id="tag-add-btn" class='button' value='{%trans "Add"%}' tabindex="-1" />
    </div>
    <div id="tag-list" class="row"></div>
   </div>
  </div>
{%endblock%}

