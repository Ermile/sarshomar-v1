{%extends display.main%}


{%block content%}
{% spaceless %}
   <div class="main pad box">
    {%include template.progress%}
     <div class="row auto" id='question-add' data-id="{{poll.id}}" data-status="{{poll.status}}">

       <div class="sync unselectable">
        <div class="sync-in">
         <span class="sync-loader"></span>
         <span class="sync-checkmark"></span>
         <span class="sync-message synced">{%trans "Synced"%}</span>
         <span class="sync-message syncing">{%trans "Syncing"%}</span>
        </div>
       </div>

       <div class="stepAdd">
        {%block step1%}1{%endblock%}
       </div>

       <div class="stepFilter">
        {%block step2%}2{%endblock%}
       </div>

       <div class="stepPublish">
        {%block step3%}3{%endblock%}
       </div>

     </div>
     {{block('feature_btn')}}
   </div>
   {{block('modalCrop')}}
{% endspaceless %}
{%endblock%}


{%block feature_btn%}
<div class="row auto">
 <div class="span7">
  <div class="btn-container margin-top">
  <input type="hidden" name="n" value="v" id="submit-form">
  <nav>
   {%if survey_mod%}
   <button class="btn" send-name="add_poll" value="add_poll">{%trans "Add Poll"%}</button>
   {%else%}
   {%endif%}
   <a class="btn primary" id='next-step' data-draft='{%trans "Save it"%}'>{%trans "Next Step"%}</a>
  </nav>
  </div>
 </div>
</div>
{%endblock%}


{%block foot_js2%}

<link rel="stylesheet" type="text/css" href="{{url.static}}css/lib/ionrangeSlider/ionrangeSlider.css">
<script type="text/javascript" src="{{url.static}}js/lib/ionrangeSlider/ion.rangeSlider.min.js"></script>

<script type="text/javascript">


$("#example_id").ionRangeSlider({
    onStart: function (data) {
        console.log("onStart");
    },
    onChange: function (data) {
        // data.step = 10;
        console.log("onChange");
    },
    onFinish: function (data)
    {
        console.log("onFinish");
      console.log(data);

      if(data.from > 1000)
      {
        $("#example_id").data("ionRangeSlider").update({
            step: 1000
        });
        // data.step = 1000;
      }
      // else
      // {
      //   $("#example_id").data("ionRangeSlider").update({
      //       step: 10
      //   });
      // }
    },
    onUpdate: function (data) {
        console.log("onUpdate");
    }
});

$("#example_id2").ionRangeSlider();

//  $("#example_id2").data("ionRangeSlider").update({
//     max: 10, to:9
// });
</script>

{%endblock%}